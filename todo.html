<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lavender Todo List</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #f8f4ff 0%, #e9d5ff 50%, #ddd6fe 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(216, 180, 254, 0.15) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, -20px) rotate(5deg); }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 50%, #c4b5fd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 3.5em;
            margin-bottom: 10px;
            text-shadow: none;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .subtitle {
            text-align: center;
            background: linear-gradient(90deg, #a78bfa 0%, #c4b5fd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.3em;
            margin-bottom: 30px;
            font-weight: 500;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(243, 232, 255, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 25px;
            text-align: center;
            border: 2px solid rgba(216, 180, 254, 0.4);
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 50px rgba(139, 92, 246, 0.3);
        }

        .stat-number {
            font-size: 2.8em;
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .stat-label {
            background: linear-gradient(90deg, #a78bfa 0%, #c4b5fd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1em;
            margin-top: 5px;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .todo-section, .graph-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 245, 255, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 35px;
            border: 2px solid rgba(216, 180, 254, 0.4);
            box-shadow: 0 15px 50px rgba(139, 92, 246, 0.15);
            transition: all 0.3s ease;
        }

        .todo-section:hover, .graph-section:hover {
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.25);
        }

        .section-title {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 700;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        input[type="text"] {
            flex: 1;
            padding: 14px 22px;
            border: 2px solid rgba(216, 180, 254, 0.5);
            border-radius: 30px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.05em;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 245, 255, 0.95) 100%);
            color: #7c3aed;
            outline: none;
            transition: all 0.3s;
            font-weight: 500;
        }

        input[type="text"]:focus {
            border-color: #a78bfa;
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.4);
            background: rgba(255, 255, 255, 1);
        }

        input[type="text"]::placeholder {
            color: #c4b5fd;
        }

        button {
            padding: 14px 28px;
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 30px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.5);
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }

        button:active {
            transform: translateY(-1px);
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 22px;
            font-size: 0.95em;
            background: linear-gradient(135deg, rgba(216, 180, 254, 0.3) 0%, rgba(196, 181, 253, 0.3) 100%);
            color: #7c3aed;
            font-weight: 600;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
            color: white;
        }

        .todo-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .todo-item {
            background: linear-gradient(135deg, rgba(243, 232, 255, 0.6) 0%, rgba(237, 233, 254, 0.6) 100%);
            padding: 16px 18px;
            margin-bottom: 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
            border: 2px solid rgba(216, 180, 254, 0.3);
        }

        .todo-item:hover {
            background: linear-gradient(135deg, rgba(237, 233, 254, 0.8) 0%, rgba(221, 214, 254, 0.8) 100%);
            border-color: rgba(167, 139, 250, 0.5);
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.15);
        }

        .todo-item.completed {
            opacity: 0.6;
        }

        .todo-item.completed .todo-text {
            text-decoration: line-through;
            color: #a78bfa;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #9f7aea;
        }

        .todo-text {
            flex: 1;
            color: #7c3aed;
            font-size: 1.05em;
            font-weight: 500;
        }

        .todo-time {
            font-size: 0.85em;
            color: #a78bfa;
            font-weight: 600;
        }

        .delete-btn {
            padding: 6px 16px;
            font-size: 0.9em;
            background: linear-gradient(135deg, #e9d5ff 0%, #d8b4fe 100%);
            color: #7c3aed;
            font-weight: 600;
        }

        .delete-btn:hover {
            background: linear-gradient(135deg, #d8b4fe 0%, #c084fc 100%);
            color: white;
        }

        canvas {
            max-width: 100%;
            border-radius: 15px;
        }

        .date-selector {
            text-align: center;
            margin-bottom: 20px;
        }

        input[type="date"] {
            padding: 12px 22px;
            border: 2px solid rgba(216, 180, 254, 0.5);
            border-radius: 25px;
            font-family: 'Quicksand', sans-serif;
            font-size: 1em;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 245, 255, 0.95) 100%);
            color: #7c3aed;
            outline: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        input[type="date"]:focus {
            border-color: #a78bfa;
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.4);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(230, 230, 250, 0.3);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #9f7aea 0%, #6b46c1 100%);
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>✨ My Todo ✨</h1>
        <p class="subtitle">Stay organized in style</p>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number" id="totalTasks">0</div>
                <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completedTasks">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="pendingTasks">0</div>
                <div class="stat-label">Pending</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="completionRate">0%</div>
                <div class="stat-label">Success Rate</div>
            </div>
        </div>

        <div class="main-content">
            <div class="todo-section">
                <h2 class="section-title">My Tasks</h2>
                <div class="input-group">
                    <input type="text" id="todoInput" placeholder="Add a new task...">
                    <button onclick="addTodo()">Add</button>
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterTodos('all')">All</button>
                    <button class="filter-btn" onclick="filterTodos('active')">Active</button>
                    <button class="filter-btn" onclick="filterTodos('completed')">Completed</button>
                </div>
                <div class="todo-list" id="todoList"></div>
            </div>

            <div class="graph-section">
                <h2 class="section-title">Daily Progress</h2>
                <div class="date-selector">
                    <input type="date" id="dateSelector" onchange="updateGraph()">
                </div>
                <canvas id="progressChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        let todos = [];
        let currentFilter = 'all';
        let dailyStats = {};

        // Initialize with today's date
        document.getElementById('dateSelector').valueAsDate = new Date();

        function saveTodos() {
            const data = { todos, dailyStats };
            localStorage.setItem('lavenderTodos', JSON.stringify(data));
        }

        function loadTodos() {
            const saved = localStorage.getItem('lavenderTodos');
            if (saved) {
                const data = JSON.parse(saved);
                todos = data.todos || [];
                dailyStats = data.dailyStats || {};
            }
            renderTodos();
            updateStats();
            updateGraph();
        }

        function addTodo() {
            const input = document.getElementById('todoInput');
            const text = input.value.trim();
            
            if (text) {
                const todo = {
                    id: Date.now(),
                    text: text,
                    completed: false,
                    createdAt: new Date().toISOString(),
                    completedAt: null
                };
                todos.unshift(todo);
                input.value = '';
                saveTodos();
                renderTodos();
                updateStats();
            }
        }

        function toggleTodo(id) {
            const todo = todos.find(t => t.id === id);
            if (todo) {
                todo.completed = !todo.completed;
                todo.completedAt = todo.completed ? new Date().toISOString() : null;
                
                const dateKey = new Date().toISOString().split('T')[0];
                if (!dailyStats[dateKey]) {
                    dailyStats[dateKey] = { completed: 0, created: 0 };
                }
                
                if (todo.completed) {
                    dailyStats[dateKey].completed++;
                } else {
                    dailyStats[dateKey].completed--;
                }
                
                saveTodos();
                renderTodos();
                updateStats();
                updateGraph();
            }
        }

        function deleteTodo(id) {
            todos = todos.filter(t => t.id !== id);
            saveTodos();
            renderTodos();
            updateStats();
        }

        function filterTodos(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            renderTodos();
        }

        function renderTodos() {
            const list = document.getElementById('todoList');
            let filteredTodos = todos;

            if (currentFilter === 'active') {
                filteredTodos = todos.filter(t => !t.completed);
            } else if (currentFilter === 'completed') {
                filteredTodos = todos.filter(t => t.completed);
            }

            list.innerHTML = filteredTodos.map(todo => `
                <div class="todo-item ${todo.completed ? 'completed' : ''}">
                    <input type="checkbox" ${todo.completed ? 'checked' : ''} 
                           onchange="toggleTodo(${todo.id})">
                    <span class="todo-text">${todo.text}</span>
                    <span class="todo-time">${new Date(todo.createdAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                    <button class="delete-btn" onclick="deleteTodo(${todo.id})">Delete</button>
                </div>
            `).join('');
        }

        function updateStats() {
            const total = todos.length;
            const completed = todos.filter(t => t.completed).length;
            const pending = total - completed;
            const rate = total > 0 ? Math.round((completed / total) * 100) : 0;

            document.getElementById('totalTasks').textContent = total;
            document.getElementById('completedTasks').textContent = completed;
            document.getElementById('pendingTasks').textContent = pending;
            document.getElementById('completionRate').textContent = rate + '%';
        }

        function updateGraph() {
            const selectedDate = document.getElementById('dateSelector').value;
            const canvas = document.getElementById('progressChart');
            const ctx = canvas.getContext('2d');
            
            // Get hourly stats for selected date
            const hourlyData = Array(24).fill(0);
            const todosForDate = todos.filter(todo => {
                const todoDate = new Date(todo.completedAt || todo.createdAt).toISOString().split('T')[0];
                return todoDate === selectedDate && todo.completed;
            });

            todosForDate.forEach(todo => {
                const hour = new Date(todo.completedAt).getHours();
                hourlyData[hour]++;
            });

            // Clear canvas
            canvas.width = canvas.offsetWidth * 2;
            canvas.height = 400;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw graph
            const padding = 60;
            const graphWidth = canvas.width - padding * 2;
            const graphHeight = canvas.height - padding * 2;
            const maxValue = Math.max(...hourlyData, 1);
            const barWidth = 30;
            const spacing = (graphHeight - 24 * barWidth) / 23;

            // Draw title
            ctx.fillStyle = '#6b46c1';
            ctx.font = 'bold 24px Brush Script MT';
            ctx.textAlign = 'center';
            ctx.fillText('Tasks Completed by Hour', canvas.width / 2, 30);

            // Draw horizontal bars
            hourlyData.forEach((value, hour) => {
                const barLength = (value / maxValue) * graphWidth;
                const y = padding + hour * (barWidth + spacing);

                // Gradient
                const gradient = ctx.createLinearGradient(padding, y, padding + barLength, y);
                gradient.addColorStop(0, '#d8b4fe');
                gradient.addColorStop(0.5, '#9f7aea');
                gradient.addColorStop(1, '#6b46c1');

                // Draw bar
                ctx.fillStyle = gradient;
                ctx.fillRect(padding, y, barLength, barWidth);

                // Draw bar outline
                ctx.strokeStyle = 'rgba(107, 70, 193, 0.3)';
                ctx.lineWidth = 2;
                ctx.strokeRect(padding, y, barLength, barWidth);

                // Hour label on left
                ctx.fillStyle = '#6b46c1';
                ctx.font = 'bold 16px Brush Script MT';
                ctx.textAlign = 'right';
                ctx.fillText(hour + ':00', padding - 10, y + barWidth / 2 + 6);

                // Value label on right
                if (value > 0) {
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 16px Brush Script MT';
                    ctx.textAlign = 'left';
                    ctx.fillText(value, padding + barLength + 10, y + barWidth / 2 + 6);
                }
            });
        }

        // Event listener for Enter key
        document.getElementById('todoInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addTodo();
            }
        });

        // Load todos on page load
        loadTodos();
    </script>
</body>
</html>